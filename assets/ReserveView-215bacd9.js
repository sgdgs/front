import{Y as C,x as n,o as B,a1 as M,a2 as s,ag as P,a5 as $,a7 as F,c as a,a9 as e,ar as T,as as d,J as U,aa as N,af as R,av as q}from"./index-9b69bf0a.js";import{v as z}from"./index-7f9c24fd.js";import{c as A,a as b,u as I,d as c}from"./index.esm-2f131579.js";import{V as H}from"./VContainer-9c07e721.js";import{V as v}from"./VCol-eb0e3ec7.js";import{V as J}from"./VForm-3befb9de.js";import{V as L}from"./VSelect-f94f96c2.js";import{V as W}from"./VRow-1ea05bcc.js";import"./VList-49ebe5e0.js";import"./VListItem-381917c6.js";import"./VDivider-9a34c3a4.js";import"./VMenu-7fb9c6e2.js";const Y=R("h1",{style:{"text-align":"center"}},"預約日期",-1),se={__name:"ReserveView",setup(j){const{apiAuth:h}=P(),w=$(),p=C(),k=A({name:b().required("姓名為必填欄位"),phone:b().required("電話為必填欄位").test("isPhone","電話格式錯誤",o=>z.isMobilePhone(o,"zh-TW"))}),{handleSubmit:x,isSubmitting:f}=I({validationSchema:k,initialValues:{name:"",phone:"",date:new Date,service:"",user:""}}),u=c("name"),m=c("phone"),r=c("date"),y=n(["洗髮","剪髮","燙髮","染髮","護髮","燙染","燙染護","燙染護剪"]),i=n(null),V=x(async o=>{try{await h.post("/reserve/",{date:o.date,name:o.name,phone:o.phone,service:i.value,user:o.user}),p({text:"預約成功",showCloseButton:!1,snackbarProps:{timeout:2e3,color:"green",location:"bottom"}}),w.push("/check")}catch(t){console.log(t),p({text:"預約失敗",showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}}),S={hours:{min:10,max:17},minutes:{interval:60}},_=n([{repeat:{weekdays:[2]}}]),g=n(new Date);setInterval(()=>{g.value=new Date},6e4);const D=B(()=>`${r.value.value.toLocaleDateString()}/ ${r.value.value.getHours()}:${r.value.value.getMinutes().toString().padStart(2,"0")}`);return(o,t)=>(F(),M(H,null,{default:s(()=>[Y,a(W,null,{default:s(()=>[a(v,{cols:"12",sm:"6"},{default:s(()=>[a(e(q),{style:{width:"80%","margin-left":"10%"},modelValue:e(r).value.value,"onUpdate:modelValue":t[0]||(t[0]=l=>e(r).value.value=l),mode:"dateTime",rules:S,"min-date":g.value,"disabled-dates":_.value},null,8,["modelValue","min-date","disabled-dates"])]),_:1}),a(v,{cols:"12",sm:"6"},{default:s(()=>[a(v,{cols:"12",style:{"margin-left":"50%",transform:"translate(-50%)"}},{default:s(()=>[a(J,{disabled:e(f),onSubmit:T(e(V),["prevent"])},{default:s(()=>[a(d,{"model-value":D.value,label:"預約日期",readonly:"","error-messages":e(r).errorMessage.value},null,8,["model-value","error-messages"]),a(d,{modelValue:e(u).value.value,"onUpdate:modelValue":t[1]||(t[1]=l=>e(u).value.value=l),label:"姓名","error-messages":e(u).errorMessage.value},null,8,["modelValue","error-messages"]),a(d,{modelValue:e(m).value.value,"onUpdate:modelValue":t[2]||(t[2]=l=>e(m).value.value=l),label:"電話","error-messages":e(m).errorMessage.value},null,8,["modelValue","error-messages"]),a(L,{modelValue:i.value,"onUpdate:modelValue":t[3]||(t[3]=l=>i.value=l),label:"服務項目",items:y.value,variant:"outlined"},null,8,["modelValue","items"]),a(U,{style:{width:"30%","font-size":"1.5rem","margin-left":"50%",transform:"translate(-50%)"},color:"primary",onClick:e(V),type:"submit",loading:e(f)},{default:s(()=>[N("預約 ")]),_:1},8,["onClick","loading"])]),_:1},8,["disabled","onSubmit"])]),_:1})]),_:1})]),_:1})]),_:1}))}};export{se as default};
