import{_ as m,Y as h,x as f,A as v,a1 as V,a2 as e,aj as g,a7 as k,c as o,aa as i,ac as l,J as w,W as x,ag as C,ah as S,ai as b}from"./index-a46c7b84.js";import{V as y}from"./VContainer-98a44c4a.js";import{V as d}from"./VCol-c4467f1c.js";import{V as B}from"./VDataTable-2fb03319.js";import"./VSelect-d78edf5f.js";import"./VList-cbb47d7b.js";import"./VListItem-5081626a.js";import"./VDivider-573c678f.js";import"./VMenu-21b049ea.js";const D=s=>(C("data-v-e98327f7"),s=s(),S(),s),I=D(()=>b("h1",{style:{"text-align":"center"}},"預約紀錄",-1)),A={__name:"CheckView",setup(s){const{apiAuth:u}=g(),n=h(),r=f([]),p=[{title:"預約日期",value:"date"},{title:"手機",value:"phone"},{title:"姓名",value:"name"},{title:"服務項目",value:"service"},{title:"取消預約",value:"action"}],_=async t=>{try{await u.delete(`/reserve/${t}`),r.value.result=r.value.result.filter(c=>c._id!==t),n({text:"刪除成功",showCloseButton:!1,snackbarProps:{timeout:2e3,color:"green",location:"bottom"}})}catch(c){console.log(c),n({text:"刪除失敗",showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}};return v(async()=>{try{const{data:t}=await u.get("/reserve/me");r.value.result=t.result}catch(t){console.log(t),n({text:"取得預約紀錄失敗",showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}}),(t,c)=>(k(),V(y,null,{default:e(()=>[o(d,{cols:"12"},{default:e(()=>[I]),_:1}),o(d,{cols:"12"},{default:e(()=>[o(B,{items:r.value.result,headers:p},{"item.date":e(({item:a})=>[i(l(new Date(a.date).toLocaleDateString())+" "+l(new Date(a.date).getHours().toString().padStart(2,"0"))+":"+l(new Date(a.date).getMinutes().toString().padStart(2,"0")),1)]),"item.action":e(({item:a})=>[o(w,{variant:"text",icon:"",color:"red",onClick:N=>_(a._id)},{default:e(()=>[o(x,null,{default:e(()=>[i("mdi-delete")]),_:1})]),_:2},1032,["onClick"])]),"item.service":e(({item:a})=>[i(l(a.service),1)]),_:2},1032,["items"])]),_:1})]),_:1}))}},Y=m(A,[["__scopeId","data-v-e98327f7"]]);export{Y as default};
