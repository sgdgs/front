import{_ as B,Y as k,a1 as M,a2 as t,aj as R,a5 as q,a7 as F,c as s,a9 as e,au as I,av as m,J as U,aa as N,ag as $,ah as E,ai as v}from"./index-a46c7b84.js";import{_ as P}from"./dog-10f6f195.js";import{v as T}from"./index-d02a6bb4.js";import{c as j,a as n,b as A,u as D,d as i}from"./index.esm-cd54dbb6.js";import{V as J}from"./VContainer-98a44c4a.js";import{V}from"./VCol-c4467f1c.js";import{V as O}from"./VDivider-573c678f.js";import{V as Y}from"./VForm-bcb2f5f6.js";import{V as z}from"./VRow-4f0bb996.js";const f=l=>($("data-v-557366d4"),l=l(),E(),l),G=f(()=>v("h1",null,"註冊",-1)),H=f(()=>v("img",{src:P,alt:"註冊圖片",width:"100%"},null,-1)),K={__name:"RegisterView",setup(l){const{api:w}=R(),b=q(),_=k(),h=j({account:n().required("帳號為必填欄位").min(4,"使用者帳號長度不符").max(20,"使用者帳號長度不符"),email:n().required("信箱為必填欄位").test("isEmail","信箱格式錯誤",r=>T.isEmail(r)),password:n().required("密碼為必填欄位").min(4,"密碼長度不符").max(20,"密碼長度不符"),passwordConfirm:n().required("密碼為必填欄位").min(4,"密碼長度不符").max(20,"密碼長度不符").oneOf([A("password")],"密碼不一致")}),{handleSubmit:x,isSubmitting:S}=D({validationSchema:h}),d=i("account"),c=i("email"),p=i("password"),g=i("passwordConfirm"),y=x(async r=>{var a,o;try{await w.post("/users",{account:r.account,email:r.email,password:r.password}),_({text:"註冊成功",showCloseButton:!1,snackbarProps:{timeout:2e3,color:"green",location:"bottom"}}),b.push("/login")}catch(u){console.log(u);const C=((o=(a=u==null?void 0:u.response)==null?void 0:a.data)==null?void 0:o.message)||"發生錯誤，請稍後再試";_({text:C,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}});return(r,a)=>(F(),M(J,null,{default:t(()=>[s(z,null,{default:t(()=>[s(V,{cols:"12",sm:"6"},{default:t(()=>[G]),_:1}),s(O),s(V,{cols:"12",sm:"6"},{default:t(()=>[s(Y,{disabled:e(S),onSubmit:I(e(y),["prevent"])},{default:t(()=>[s(m,{label:"帳號",minlength:"4",maxlength:"20",counter:"",modelValue:e(d).value.value,"onUpdate:modelValue":a[0]||(a[0]=o=>e(d).value.value=o),"error-messages":e(d).errorMessage.value},null,8,["modelValue","error-messages"]),s(m,{label:"信箱",type:"email",modelValue:e(c).value.value,"onUpdate:modelValue":a[1]||(a[1]=o=>e(c).value.value=o),"error-messages":e(c).errorMessage.value},null,8,["modelValue","error-messages"]),s(m,{label:"密碼",type:"password",minlength:"4",maxlength:"20",counter:"",modelValue:e(p).value.value,"onUpdate:modelValue":a[2]||(a[2]=o=>e(p).value.value=o),"error-messages":e(p).errorMessage.value},null,8,["modelValue","error-messages"]),s(m,{label:"確認密碼",type:"password",minlength:"4",maxlength:"20",counter:"",modelValue:e(g).value.value,"onUpdate:modelValue":a[3]||(a[3]=o=>e(g).value.value=o),"error-messages":e(g).errorMessage.value},null,8,["modelValue","error-messages"]),s(U,{type:"submit",color:"brown-lighten-2"},{default:t(()=>[N("註冊")]),_:1})]),_:1},8,["disabled","onSubmit"])]),_:1}),s(V,{cols:"12",sm:"6"},{default:t(()=>[H]),_:1})]),_:1})]),_:1}))}},te=B(K,[["__scopeId","data-v-557366d4"]]);export{te as default};
