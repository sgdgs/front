import{_ as m,Y as f,x as h,A as v,a2 as k,a3 as e,ak as V,a8 as w,c as o,ab as i,ad as l,J as g,W as x,ae as C,af as S,a1 as b}from"./index-b165e33f.js";import{V as y}from"./VContainer-ff0ca106.js";import{V as d}from"./VCol-030c10d2.js";import{V as B}from"./VDataTable-31d5b623.js";import"./VSelect-18d04889.js";import"./VList-a66ea6e6.js";import"./VListItem-d967e36e.js";import"./VDivider-e41fb7b6.js";import"./VMenu-db1e8a48.js";const D=s=>(C("data-v-e98327f7"),s=s(),S(),s),I=D(()=>b("h1",{style:{"text-align":"center"}},"預約紀錄",-1)),A={__name:"CheckView",setup(s){const{apiAuth:u}=V(),n=f(),r=h([]),p=[{title:"預約日期",value:"date"},{title:"手機",value:"phone"},{title:"姓名",value:"name"},{title:"服務項目",value:"service"},{title:"取消預約",value:"action"}],_=async t=>{try{await u.delete(`/reserve/${t}`),r.value.result=r.value.result.filter(c=>c._id!==t),n({text:"刪除成功",showCloseButton:!1,snackbarProps:{timeout:2e3,color:"green",location:"bottom"}})}catch(c){console.log(c),n({text:"刪除失敗",showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}};return v(async()=>{try{const{data:t}=await u.get("/reserve/me");r.value.result=t.result}catch(t){console.log(t),n({text:"取得預約紀錄失敗",showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}}),(t,c)=>(w(),k(y,null,{default:e(()=>[o(d,{cols:"12"},{default:e(()=>[I]),_:1}),o(d,{cols:"12"},{default:e(()=>[o(B,{items:r.value.result,headers:p},{"item.date":e(({item:a})=>[i(l(new Date(a.date).toLocaleDateString())+" "+l(new Date(a.date).getHours().toString().padStart(2,"0"))+":"+l(new Date(a.date).getMinutes().toString().padStart(2,"0")),1)]),"item.action":e(({item:a})=>[o(g,{variant:"text",icon:"",color:"red",onClick:N=>_(a._id)},{default:e(()=>[o(x,null,{default:e(()=>[i("mdi-delete")]),_:1})]),_:2},1032,["onClick"])]),"item.service":e(({item:a})=>[i(l(a.service),1)]),_:2},1032,["items"])]),_:1})]),_:1}))}},j=m(A,[["__scopeId","data-v-e98327f7"]]);export{j as default};
