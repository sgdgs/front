import{_ as h,Z as k,o as m,Y as B,a0 as v,c as o,a2 as e,a7 as y,a4 as F,a6 as I,aq as c,ar as i,aa as d,ac as S,a9 as l,V as U,au as p,aw as n,J as E,ah as A,ai as D,aj as T,ak as M}from"./index-b72e60e3.js";import{V as N}from"./VContainer-e26e9217.js";import{V as w}from"./VRow-aadc0885.js";import{V as f}from"./VCol-12261913.js";import{V as R}from"./VListItem-324512fd.js";import{V}from"./VForm-9eb77f47.js";const j=u=>(A("data-v-92f8c4f7"),u=u(),D(),u),q=j(()=>T("h1",null,"會員資料",-1)),J={__name:"ManageView",setup(u){const a=k(),_=F(),b=m(()=>`https://source.boringavatars.com/beam/120/${a.account}?colors=4EB3DE,8DE0A6,FCF09F,F27C7C,DE528C`),{apiAuth:P}=M(),r=B(),g=m(()=>a.password&&a.newPassword&&a.confirmPassword),C=async()=>{if(a.newPassword!==a.confirmPassword){r({text:"新密碼與確認密碼不一致",showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}});return}else if(a.newPassword.length<4){r({text:"新密碼長度不足",showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}});return}else if(a.password===a.newPassword){r({text:"新密碼與舊密碼相同",showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}});return}try{await P.patch("/users/password",{password:a.password,newPassword:a.newPassword}),r({text:"修改成功",showCloseButton:!1,snackbarProps:{timeout:2e3,color:"green",location:"bottom"}}),a.password="",a.newPassword="",a.confirmPassword="",a.logout(),_.push("/login")}catch{r({text:"修改失敗",showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}};return(x,s)=>(I(),v(y,null,[q,o(N,null,{default:e(()=>[o(w,null,{default:e(()=>[o(f,{cols:"12"},{default:e(()=>[o(c,null,{default:e(()=>[o(i,null,{default:e(()=>[d(S(l(a).account)+"會員您好",1)]),_:1}),o(R,null,{default:e(()=>[o(U,{src:b.value},null,8,["src"])]),_:1}),o(p,null,{default:e(()=>[o(V,null,{default:e(()=>[o(n,{modelValue:l(a).account,"onUpdate:modelValue":s[0]||(s[0]=t=>l(a).account=t),label:"帳號",readonly:""},null,8,["modelValue"]),o(n,{modelValue:l(a).email,"onUpdate:modelValue":s[1]||(s[1]=t=>l(a).email=t),label:"信箱",readonly:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),o(w,null,{default:e(()=>[o(f,{cols:"12"},{default:e(()=>[o(c,null,{default:e(()=>[o(i,null,{default:e(()=>[d("修改密碼(至少4個字元)")]),_:1}),o(p,null,{default:e(()=>[o(V,null,{default:e(()=>[o(n,{modelValue:l(a).password,"onUpdate:modelValue":s[2]||(s[2]=t=>l(a).password=t),label:"舊密碼",minlength:"4",maxlength:"20"},null,8,["modelValue"]),o(n,{modelValue:l(a).newPassword,"onUpdate:modelValue":s[3]||(s[3]=t=>l(a).newPassword=t),label:"新密碼",minlength:"4",maxlength:"20"},null,8,["modelValue"]),o(n,{modelValue:l(a).confirmPassword,"onUpdate:modelValue":s[4]||(s[4]=t=>l(a).confirmPassword=t),label:"確認新密碼"},null,8,["modelValue"]),o(E,{onClick:C,disabled:!g.value,color:"primary"},{default:e(()=>[d("修改密碼")]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})],64))}},H=h(J,[["__scopeId","data-v-92f8c4f7"]]);export{H as default};
