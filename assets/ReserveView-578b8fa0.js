import{Y as C,x as n,o as B,a1 as M,a2 as s,aj as P,a5 as $,a7 as F,c as a,a9 as e,au as T,av as d,J as U,aa as N,ai as R,ay as q}from"./index-80d7f52a.js";import{v as z}from"./index-c4d51ba1.js";import{c as A,a as b,u as I,d as c}from"./index.esm-1a07fb4a.js";import{V as j}from"./VContainer-8ac70d2b.js";import{V as v}from"./VCol-f52f2bcb.js";import{V as H}from"./VForm-4830ea7e.js";import{V as J}from"./VSelect-083c81c9.js";import{V as L}from"./VRow-da8767c0.js";import"./VList-e21809c3.js";import"./VListItem-a6cca2a6.js";import"./VDivider-07b494a9.js";import"./VMenu-9cdfd628.js";const W=R("h1",{style:{"text-align":"center"}},"預約日期",-1),se={__name:"ReserveView",setup(Y){const{apiAuth:h}=P(),w=$(),p=C(),y=A({name:b().required("姓名為必填欄位"),phone:b().required("電話為必填欄位").test("isPhone","電話格式錯誤",o=>z.isMobilePhone(o,"zh-TW"))}),{handleSubmit:k,isSubmitting:f}=I({validationSchema:y,initialValues:{name:"",phone:"",date:new Date,service:"",user:""}}),u=c("name"),i=c("phone"),r=c("date"),x=n(["洗髮","剪髮","燙髮","染髮","護髮","燙染","燙染護","燙染護剪"]),m=n(null),V=k(async o=>{try{await h.post("/reserve/",{date:o.date,name:o.name,phone:o.phone,service:m.value,user:o.user}),p({text:"預約成功",showCloseButton:!1,snackbarProps:{timeout:2e3,color:"green",location:"bottom"}}),w.push("/check")}catch(t){console.log(t),p({text:"預約失敗",showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}}),S={hours:{min:10,max:17},minutes:{interval:60}},_=n([{repeat:{weekdays:[2]}}]),g=n(new Date);setInterval(()=>{g.value=new Date},6e4);const D=B(()=>`${r.value.value.toLocaleDateString()}/ ${r.value.value.getHours()}:${r.value.value.getMinutes().toString().padStart(2,"0")}`);return(o,t)=>(F(),M(j,null,{default:s(()=>[W,a(L,null,{default:s(()=>[a(v,{cols:"12",sm:"6"},{default:s(()=>[a(e(q),{style:{width:"80%","margin-left":"10%"},modelValue:e(r).value.value,"onUpdate:modelValue":t[0]||(t[0]=l=>e(r).value.value=l),mode:"dateTime",rules:S,"min-date":g.value,"disabled-dates":_.value},null,8,["modelValue","min-date","disabled-dates"])]),_:1}),a(v,{cols:"12",sm:"6"},{default:s(()=>[a(v,{cols:"12",style:{"margin-left":"50%",transform:"translate(-50%)"}},{default:s(()=>[a(H,{disabled:e(f),onSubmit:T(e(V),["prevent"])},{default:s(()=>[a(d,{"model-value":D.value,label:"預約日期",readonly:"","error-messages":e(r).errorMessage.value},null,8,["model-value","error-messages"]),a(d,{modelValue:e(u).value.value,"onUpdate:modelValue":t[1]||(t[1]=l=>e(u).value.value=l),label:"姓名","error-messages":e(u).errorMessage.value},null,8,["modelValue","error-messages"]),a(d,{modelValue:e(i).value.value,"onUpdate:modelValue":t[2]||(t[2]=l=>e(i).value.value=l),label:"電話","error-messages":e(i).errorMessage.value},null,8,["modelValue","error-messages"]),a(J,{modelValue:m.value,"onUpdate:modelValue":t[3]||(t[3]=l=>m.value=l),label:"服務項目",items:x.value,variant:"outlined"},null,8,["modelValue","items"]),a(U,{style:{width:"30%","font-size":"1.5rem","margin-left":"50%",transform:"translate(-50%)"},color:"primary",onClick:e(V),type:"submit",loading:e(f)},{default:s(()=>[N("預約 ")]),_:1},8,["onClick","loading"])]),_:1},8,["disabled","onSubmit"])]),_:1})]),_:1})]),_:1})]),_:1}))}};export{se as default};
