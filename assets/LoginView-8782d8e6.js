import{_ as B,Y as k,Z as C,a1 as I,a2 as s,aj as F,a5 as L,a7 as N,c as e,a9 as a,au as M,av as _,J as U,aa as q,ag as P,ah as R,ai as m}from"./index-173e3c6f.js";import{_ as T}from"./dog-10f6f195.js";import{c as $,a as f,u as j,d as g}from"./index.esm-256a450b.js";import{V as A}from"./VContainer-6af787ea.js";import{V as i}from"./VCol-e597199d.js";import{V as D}from"./VDivider-0660eaea.js";import{V as G}from"./VForm-40d52f6a.js";import{V as J}from"./VRow-49f34d31.js";const d=l=>(P("data-v-fc217ce8"),l=l(),R(),l),O=d(()=>m("h1",null,"LOGIN",-1)),Y=d(()=>m("p",null,"login your account with username and password",-1)),Z=d(()=>m("img",{src:T,width:"100%"},null,-1)),z={__name:"LoginView",setup(l){const{api:V}=F(),h=L(),p=k(),w=C(),v=$({account:f().required("帳號為必填欄位").min(4,"使用者帳號長度不符").max(20,"使用者帳號長度不符"),password:f().required("密碼為必填欄位").min(4,"密碼長度不符").max(20,"密碼長度不符")}),{handleSubmit:b,isSubmitting:x}=j({validationSchema:v}),n=g("account"),u=g("password"),S=b(async c=>{var o,t;try{const{data:r}=await V.post("/users/login",{account:c.account,password:c.password});w.login(r.result),p({text:"登入成功",showCloseButton:!1,snackbarProps:{timeout:2e3,color:"green",location:"bottom"}}),h.push("/")}catch(r){console.log(r);const y=((t=(o=r==null?void 0:r.response)==null?void 0:o.data)==null?void 0:t.message)||"發生錯誤，請稍後再試";p({text:y,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}});return(c,o)=>(N(),I(A,null,{default:s(()=>[e(J,null,{default:s(()=>[e(i,{cols:"12",sm:"6"},{default:s(()=>[O,Y]),_:1}),e(D),e(i,{cols:"12",sm:"6"},{default:s(()=>[e(G,{disabled:a(x),onSubmit:M(a(S),["prevent"])},{default:s(()=>[e(_,{label:"帳號",minlength:"4",maxlength:"20",counter:"",modelValue:a(n).value.value,"onUpdate:modelValue":o[0]||(o[0]=t=>a(n).value.value=t),"error-messages":a(n).errorMessage.value},null,8,["modelValue","error-messages"]),e(_,{label:"密碼",type:"password",minlength:"4",maxlength:"20",counter:"",modelValue:a(u).value.value,"onUpdate:modelValue":o[1]||(o[1]=t=>a(u).value.value=t),"error-messages":a(u).errorMessage.value},null,8,["modelValue","error-messages"]),e(U,{type:"submit",color:"brown-lighten-2"},{default:s(()=>[q("登入")]),_:1})]),_:1},8,["disabled","onSubmit"])]),_:1}),e(i,{cols:"12",sm:"6"},{default:s(()=>[Z]),_:1})]),_:1})]),_:1}))}},oe=B(z,[["__scopeId","data-v-fc217ce8"]]);export{oe as default};
