import{_ as m,Y as h,x as v,A as f,a1 as k,a2 as e,ak as V,a6 as w,c as o,aa as i,ac as l,J as C,W as g,ah as x,ai as S,aj as b}from"./index-b72e60e3.js";import{V as y}from"./VContainer-e26e9217.js";import{V as d}from"./VCol-12261913.js";import{V as B}from"./VDataTable-acc1b357.js";import"./VSelect-54905b34.js";import"./VList-f1a5f775.js";import"./VListItem-324512fd.js";import"./VDivider-3e977bfc.js";import"./VMenu-a8b38384.js";const D=s=>(x("data-v-73084453"),s=s(),S(),s),I=D(()=>b("h1",null,"預約紀錄",-1)),A={__name:"CheckView",setup(s){const{apiAuth:u}=V(),n=h(),r=v([]),p=[{title:"預約日期",value:"date"},{title:"手機",value:"phone"},{title:"姓名",value:"name"},{title:"服務項目",value:"service"},{title:"取消預約",value:"action"}],_=async t=>{try{await u.delete(`/reserve/${t}`),r.value.result=r.value.result.filter(c=>c._id!==t),n({text:"刪除成功",showCloseButton:!1,snackbarProps:{timeout:2e3,color:"green",location:"bottom"}})}catch(c){console.log(c),n({text:"刪除失敗",showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}};return f(async()=>{try{const{data:t}=await u.get("/reserve/me");r.value.result=t.result}catch(t){console.log(t),n({text:"取得預約紀錄失敗",showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}}),(t,c)=>(w(),k(y,null,{default:e(()=>[o(d,{cols:"12"},{default:e(()=>[I]),_:1}),o(d,{cols:"12"},{default:e(()=>[o(B,{items:r.value.result,headers:p},{"item.date":e(({item:a})=>[i(l(new Date(a.date).toLocaleDateString())+" "+l(new Date(a.date).getHours().toString().padStart(2,"0"))+":"+l(new Date(a.date).getMinutes().toString().padStart(2,"0")),1)]),"item.action":e(({item:a})=>[o(C,{variant:"text",icon:"",color:"red",onClick:N=>_(a._id)},{default:e(()=>[o(g,null,{default:e(()=>[i("mdi-delete")]),_:1})]),_:2},1032,["onClick"])]),"item.service":e(({item:a})=>[i(l(a.service),1)]),_:2},1032,["items"])]),_:1})]),_:1}))}},Y=m(A,[["__scopeId","data-v-73084453"]]);export{Y as default};
