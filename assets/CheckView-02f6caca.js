import{_ as m,Y as h,x as v,A as f,a1 as k,a2 as e,ak as V,a6 as w,c as o,aa as i,ac as l,J as C,W as g,ah as x,ai as S,aj as b}from"./index-55e1d8e3.js";import{V as y}from"./VContainer-a7985239.js";import{V as u}from"./VCol-da2a5a46.js";import{V as B}from"./VDataTable-504fb0b8.js";import"./VSelect-8e7f3da9.js";import"./VList-c78d230e.js";import"./VListItem-ee01f886.js";import"./VDivider-d1e2d646.js";import"./VMenu-4d3f5a01.js";const D=s=>(x("data-v-4298dc19"),s=s(),S(),s),I=D(()=>b("h1",null,"預約紀錄",-1)),A={__name:"CheckView",setup(s){const{apiAuth:d}=V(),n=h(),r=v([]),p=[{title:"預約日期",value:"date"},{title:"手機",value:"phone"},{title:"姓名",value:"name"},{title:"服務項目",value:"service"},{title:"取消預約",value:"action"}],_=async t=>{try{await d.delete(`/reserve/${t}`),r.value.result=r.value.result.filter(c=>c._id!==t),n({text:"刪除成功",showCloseButton:!1,snackbarProps:{timeout:2e3,color:"green",location:"bottom"}})}catch(c){console.log(c),n({text:"刪除失敗",showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}};return f(async()=>{try{const{data:t}=await d.get("/reserve/me");r.value.result=t.result}catch(t){console.log(t),n({text:"取得預約紀錄失敗",showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}}),(t,c)=>(w(),k(y,null,{default:e(()=>[o(u,{cols:"12"},{default:e(()=>[I]),_:1}),o(u,{cols:"12"},{default:e(()=>[o(B,{items:r.value.result,headers:p},{"item.date":e(({item:a})=>[i(l(new Date(a.date).toLocaleDateString())+" "+l(new Date(a.date).getHours().toString().padStart(2,"0"))+":"+l(new Date(a.date).getMinutes().toString().padStart(2,"0")),1)]),"item.action":e(({item:a})=>[o(C,{variant:"text",icon:"",color:"red",onClick:N=>_(a._id)},{default:e(()=>[o(g,null,{default:e(()=>[i("mdi-delete")]),_:1})]),_:2},1032,["onClick"])]),"item.service":e(({item:a})=>[i(l(a.service),1)]),_:2},1032,["items"])]),_:1})]),_:1}))}},Y=m(A,[["__scopeId","data-v-4298dc19"]]);export{Y as default};
