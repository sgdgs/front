import{_ as k,Y as B,Z as C,a1 as I,a2 as s,ak as F,a4 as L,a6 as N,c as e,a9 as a,av as M,aw as _,J as U,aa as q,ah as P,ai as R,aj as d}from"./index-db51f11e.js";import{_ as T}from"./dog-10f6f195.js";import{c as $,a as g,u as j,d as V}from"./index.esm-c417bef4.js";import{V as A}from"./VContainer-4a5d8212.js";import{V as i}from"./VCol-b69943a2.js";import{V as D}from"./VDivider-4380addb.js";import{V as G}from"./VForm-5e700a15.js";import{V as J}from"./VRow-6061a07f.js";const m=l=>(P("data-v-8d135938"),l=l(),R(),l),O=m(()=>d("h1",null,"LOGIN",-1)),Y=m(()=>d("p",null,"login your account with username and password",-1)),Z=m(()=>d("img",{src:T,width:"100%"},null,-1)),z={__name:"LoginView",setup(l){const{api:f}=F(),w=L(),p=B(),h=C(),v=$({account:g().required("帳號為必填欄位").min(4,"使用者帳號長度不符").max(20,"使用者帳號長度不符"),password:g().required("密碼為必填欄位").min(4,"密碼長度不符").max(20,"密碼長度不符")}),{handleSubmit:b,isSubmitting:x}=j({validationSchema:v}),n=V("account"),u=V("password"),S=b(async c=>{var o,t;try{const{data:r}=await f.post("/users/login",{account:c.account,password:c.password});h.login(r.result),p({text:"登入成功",showCloseButton:!1,snackbarProps:{timeout:2e3,color:"green",location:"bottom"}}),w.push("/")}catch(r){console.log(r);const y=((t=(o=r==null?void 0:r.response)==null?void 0:o.data)==null?void 0:t.message)||"發生錯誤，請稍後再試";p({text:y,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}});return(c,o)=>(N(),I(A,null,{default:s(()=>[e(J,null,{default:s(()=>[e(i,{class:"login",cols:"12",sm:"6"},{default:s(()=>[O,Y]),_:1}),e(D),e(i,{cols:"12",sm:"6"},{default:s(()=>[e(G,{disabled:a(x),onSubmit:M(a(S),["prevent"])},{default:s(()=>[e(_,{label:"帳號",minlength:"4",maxlength:"20",counter:"",modelValue:a(n).value.value,"onUpdate:modelValue":o[0]||(o[0]=t=>a(n).value.value=t),"error-messages":a(n).errorMessage.value},null,8,["modelValue","error-messages"]),e(_,{label:"密碼",type:"password",minlength:"4",maxlength:"20",counter:"",modelValue:a(u).value.value,"onUpdate:modelValue":o[1]||(o[1]=t=>a(u).value.value=t),"error-messages":a(u).errorMessage.value},null,8,["modelValue","error-messages"]),e(U,{type:"submit",color:"brown-lighten-2"},{default:s(()=>[q("登入")]),_:1})]),_:1},8,["disabled","onSubmit"])]),_:1}),e(i,{cols:"12",sm:"6"},{default:s(()=>[Z]),_:1})]),_:1})]),_:1}))}},oe=k(z,[["__scopeId","data-v-8d135938"]]);export{oe as default};
