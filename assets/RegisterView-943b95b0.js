import{Y as _,a1 as y,a2 as l,aj as B,a5 as S,a7 as k,c as s,a9 as e,au as M,av as u,J as q,aa as F,ai as U}from"./index-80d7f52a.js";import{v as N}from"./index-c4d51ba1.js";import{c as R,a as n,b as $,u as E,d as m}from"./index.esm-1a07fb4a.js";import{V as P}from"./VContainer-8ac70d2b.js";import{V as g}from"./VCol-f52f2bcb.js";import{V as T}from"./VDivider-07b494a9.js";import{V as j}from"./VForm-4830ea7e.js";import{V as A}from"./VRow-da8767c0.js";const D=U("h1",null,"註冊",-1),Q={__name:"RegisterView",setup(J){const{api:f}=B(),v=S(),V=_(),b=R({account:n().required("帳號為必填欄位").min(4,"使用者帳號長度不符").max(20,"使用者帳號長度不符"),email:n().required("信箱為必填欄位").test("isEmail","信箱格式錯誤",r=>N.isEmail(r)),password:n().required("密碼為必填欄位").min(4,"密碼長度不符").max(20,"密碼長度不符"),passwordConfirm:n().required("密碼為必填欄位").min(4,"密碼長度不符").max(20,"密碼長度不符").oneOf([$("password")],"密碼不一致")}),{handleSubmit:w,isSubmitting:x}=E({validationSchema:b}),i=m("account"),d=m("email"),c=m("password"),p=m("passwordConfirm"),h=w(async r=>{var a,o;try{await f.post("/users",{account:r.account,email:r.email,password:r.password}),V({text:"註冊成功",showCloseButton:!1,snackbarProps:{timeout:2e3,color:"green",location:"bottom"}}),v.push("/login")}catch(t){console.log(t);const C=((o=(a=t==null?void 0:t.response)==null?void 0:a.data)==null?void 0:o.message)||"發生錯誤，請稍後再試";V({text:C,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}});return(r,a)=>(k(),y(P,null,{default:l(()=>[s(A,null,{default:l(()=>[s(g,{cols:"12"},{default:l(()=>[D]),_:1}),s(T),s(g,{cols:"12"},{default:l(()=>[s(j,{disabled:e(x),onSubmit:M(e(h),["prevent"])},{default:l(()=>[s(u,{label:"帳號",minlength:"4",maxlength:"20",counter:"",modelValue:e(i).value.value,"onUpdate:modelValue":a[0]||(a[0]=o=>e(i).value.value=o),"error-messages":e(i).errorMessage.value},null,8,["modelValue","error-messages"]),s(u,{label:"信箱",type:"email",modelValue:e(d).value.value,"onUpdate:modelValue":a[1]||(a[1]=o=>e(d).value.value=o),"error-messages":e(d).errorMessage.value},null,8,["modelValue","error-messages"]),s(u,{label:"密碼",type:"password",minlength:"4",maxlength:"20",counter:"",modelValue:e(c).value.value,"onUpdate:modelValue":a[2]||(a[2]=o=>e(c).value.value=o),"error-messages":e(c).errorMessage.value},null,8,["modelValue","error-messages"]),s(u,{label:"確認密碼",type:"password",minlength:"4",maxlength:"20",counter:"",modelValue:e(p).value.value,"onUpdate:modelValue":a[3]||(a[3]=o=>e(p).value.value=o),"error-messages":e(p).errorMessage.value},null,8,["modelValue","error-messages"]),s(q,{type:"submit",color:"green"},{default:l(()=>[F("註冊")]),_:1})]),_:1},8,["disabled","onSubmit"])]),_:1})]),_:1})]),_:1}))}};export{Q as default};
